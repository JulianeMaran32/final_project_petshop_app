<section class="register" aria-labelledby="registerFormTitle">
  <h2 id="registerFormTitle">Comece Agora</h2>
  <p>Experimente o PetFlow gratuitamente por 30 dias e transforme a gestão do seu petshop.</p>

  <!-- Formulário de Cadastro -->
  <form [formGroup]="registerForm" (ngSubmit)="onRegister()" class="register-form" novalidate
    aria-labelledby="registerFormTitle">

    <div id="signup-instructions" class="sr-only">
      Preencha todos os campos obrigatórios.
    </div>

    <!-- Nome Completo -->
    <div class="form-group">
      <label for="name">
        Nome Completo <span aria-hidden="true">*</span>
      </label>
      <div class="input-wrapper">
        <i class="pi pi-user" aria-hidden="true"></i>
        <input type="text" id="name" formControlName="name" placeholder="Seu nome completo" required
          aria-required="true" aria-describedby="name-error" [attr.aria-invalid]="isControlInvalid('name')">
      </div>
      <div class="error-message" id="name-error" *ngIf="isControlInvalid('name')" aria-live="assertive" role="alert">
        {{ getErrorMessage('name') }}
      </div>
    </div>

    <!-- CPF -->
    <div class="form-group">
      <label for="cpf">
        CPF <span aria-hidden="true">*</span>
      </label>
      <div class="input-wrapper">
        <i class="pi pi-id-card" aria-hidden="true"></i>
        <input type="text" id="cpf" formControlName="cpf" placeholder="000.000.000-00" required
          pattern="\d{3}\.\d{3}\.\d{3}-\d{2}" aria-required="true" aria-describedby="cpf-error"
          [attr.aria-invalid]="isControlInvalid('cpf')">
      </div>
      <div class="error-message" id="cpf-error" *ngIf="isControlInvalid('cpf')" aria-live="assertive" role="alert">
        {{ getErrorMessage('cpf') }}
      </div>
    </div>

    <!-- E-mail -->
    <div class="form-group">
      <label for="email">
        Email <span aria-hidden="true">*</span>
      </label>
      <div class="input-wrapper">
        <i class="pi pi-envelope" aria-hidden="true"></i>
        <input id="email" type="email" formControlName="email" placeholder="Seu email" required aria-required="true"
          aria-describedby="email-error" [attr.aria-invalid]="isControlInvalid('email')">
      </div>
      <div class="error-message" id="email-error" *ngIf="isControlInvalid('email')" aria-live="assertive" role="alert">
        {{ getErrorMessage('email') }}
      </div>
    </div>

    <!-- Telefone -->
    <div class="form-group">
      <label for="phone">
        Telefone <span aria-hidden="true">*</span>
      </label>
      <div class="input-wrapper">
        <i class="pi pi-phone" aria-hidden="true"></i>
        <input id="phone" type="text" formControlName="phone" placeholder="Seu telefone" required aria-required="true"
          aria-describedby="phone-error" [attr.aria-invalid]="isControlInvalid('phone')">
      </div>
      <div class="error-message" id="phone-error" *ngIf="isControlInvalid('phone')" aria-live="assertive" role="alert">
        {{ getErrorMessage('phone') }}
      </div>
    </div>

    <!-- Senha -->
    <div class="form-group">
      <label for="password">
        Senha <span aria-hidden="true">*</span>
      </label>
      <div class="input-wrapper">
        <i class="pi pi-lock" aria-hidden="true"></i>
        <input id="password" type="password" formControlName="password" placeholder="Sua senha" required
          aria-required="true" aria-describedby="password-error" [attr.aria-invalid]="isControlInvalid('password')">
      </div>
      <div class="error-message" id="password-error" *ngIf="isControlInvalid('password')" aria-live="assertive"
        role="alert">
        {{ getErrorMessage('password') }}
      </div>
    </div>

    <!-- Confirmar Senha -->
    <div class="form-group">
      <label for="confirmPassword">
        Confirmar Senha <span aria-hidden="true">*</span>
      </label>
      <div class="input-wrapper">
        <i class="pi pi-lock" aria-hidden="true"></i>
        <input id="confirmPassword" type="password" formControlName="confirmPassword" placeholder="Confirme sua senha"
          required aria-required="true" aria-describedby="confirmPassword-error"
          [attr.aria-invalid]="isControlInvalid('confirmPassword')" />
      </div>
      <div class="error-message" id="confirmPassword-error" *ngIf="isControlInvalid('confirmPassword')"
        aria-live="assertive" role="alert">
        {{ getErrorMessage('confirmPassword') }}
      </div>
    </div>

    <!-- Tipo de Usuário -->
    <div class="form-group user-type">
      <label>Tipo de Usuário <span aria-hidden="true">*</span></label>
      <div class="input-wrapper">
        <input type="radio" id="customer" formControlName="userType" value="customer" required aria-required="true"
          tabindex="0">
        <label for="customer">Sou Dono de Pet</label>
        <input type="radio" id="owner" formControlName="userType" value="owner" required aria-required="true"
          tabindex="0">
        <label for="owner">Sou Dono de um PetShop</label>
      </div>
    </div>

    <div class="form-group terms">
      <input id="terms" type="checkbox" formControlName="terms" aria-describedby="terms-error" tabindex="0" />
      <label for="terms">
        Concordo com os <a routerLink="/terms-of-service" (click)="showTermsDialog(); $event.preventDefault();"
          tabindex="0">termos de uso</a>.
      </label>
    </div>

    <button type="submit" class="btn-primary" [disabled]="isSubmitting || !registerForm.valid" aria-live="polite"
      tabindex="0">
      <span *ngIf="!isSubmitting">Cadastrar</span>
      <span *ngIf="isSubmitting"><i class="pi pi-spin pi-spinner"></i> Cadastrando...</span>
    </button>

    <div class="form-group login-link">
      <p>Já tem uma conta? <a routerLink="/login" tabindex="0">Faça login</a>.</p>
    </div>

    <div class="success-message" *ngIf="successMessage" aria-live="polite" role="alert">
      <p>{{ successMessage }}</p>
    </div>
    <div class="error-message" *ngIf="errorMessage" aria-live="assertive" role="alert">
      <p>{{ errorMessage }}</p>
    </div>
  </form>
</section>