<section class="login">
  <h2 id="loginFormTitle">Faça seu Login</h2>
  <p>Entre na sua conta para continuar.</p>

  <!-- Formulário de Login -->
  <form [formGroup]="loginForm" (ngSubmit)="onSubmit()" class="login-form" novalidate aria-labelledby="loginFormTitle"
    role="form">

    <!-- E-mail -->
    <div class="form-group">
      <label for="email">Email</label>
      <div class="input-wrapper">
        <i class="pi pi-envelope" aria-hidden="true"></i>
        <input id="email" type="email" formControlName="email" placeholder="Seu email" aria-required="true"
          [attr.aria-invalid]="isControlInvalid('email')"
          [attr.aria-describedby]="isControlInvalid('email') ? 'emailError' : null" aria-labelledby="emailLabel" />
      </div>
      <div id="emailError" class="error-message" *ngIf="isControlInvalid('email')" aria-live="assertive" role="alert">
        {{ getErrorMessage('email') }}
      </div>
    </div>

    <!-- Senha -->
    <div class="form-group">
      <label for="password">Senha</label>
      <div class="input-wrapper">
        <i class="pi pi-lock" aria-hidden="true"></i>
        <input id="password" type="password" formControlName="password" placeholder="Sua senha" aria-required="true"
          [attr.aria-invalid]="isControlInvalid('password')"
          [attr.aria-describedby]="isControlInvalid('password') ? 'passwordError' : null"
          aria-labelledby="passwordLabel" />
      </div>
      <div id="passwordError" class="error-message" *ngIf="isControlInvalid('password')" aria-live="assertive"
        role="alert">
        {{ getErrorMessage('password') }}
      </div>
    </div>

    <!-- Botão de enviar com indicador de carregamento -->
    <button pButton type="submit" pRipple class="btn-primary" [disabled]="isSubmitting || !loginForm.valid"
      [attr.aria-busy]="isSubmitting" aria-live="polite" tabindex="0">
      <span *ngIf="!isSubmitting">Entrar</span>
      <span *ngIf="isSubmitting">
        <i class="pi pi-spin pi-spinner" aria-hidden="true"></i>
        Entrando...
      </span>
    </button>

    <!-- Links para "Esqueceu a senha?" e "Cadastrar" -->
    <nav class="links" aria-label="Login options">
      <a routerLink="/forgot-password" aria-label="Forgot password" tabindex="0">Esqueceu a senha?</a>
      <span aria-hidden="true">|</span>
      <a routerLink="/register" aria-label="Register" tabindex="0">Não tem uma conta? Cadastre-se</a>
    </nav>
  </form>

  <!-- Mensagens de erro -->
  <div class="card error-messages message-spacing">
    <p-messages aria-live="assertive" aria-atomic="true"></p-messages>
  </div>

</section>